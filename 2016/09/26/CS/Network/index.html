<!DOCTYPE html>
<html lang="en">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">



  <meta name="description" content="Network"/>




  <meta name="keywords" content="CS, A Little Boy`s Treasure" />










  <link rel="alternate" href="/atom.xml" title="A Little Boy`s Treasure">




  <link rel="shortcut icon" type="image/x-icon" href="/../public/fav.ico?v=2.6.0" />



<link rel="canonical" href="http://nic_reals.gitee.io/blog/2016/09/26/CS/Network/"/>


<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.6.0" />






  



  <script id="baidu_push">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>









    <title> Network - A Little Boy`s Treasure </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">A Little Boy`s Treasure</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            Home
          
        </li>
      </a>
    
      <a href="/archives/">
        <li class="mobile-menu-item">
          
          
            Archives
          
        </li>
      </a>
    
      <a href="/tags">
        <li class="mobile-menu-item">
          
          
            Tags
          
        </li>
      </a>
    
      <a href="/categories">
        <li class="mobile-menu-item">
          
          
            Categories
          
        </li>
      </a>
    
      <a href="/about">
        <li class="mobile-menu-item">
          
          
            About
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">A Little Boy`s Treasure</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              Home
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              Archives
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/tags">
            
            
              Tags
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/categories">
            
            
              Categories
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/about">
            
            
              About
            
          </a>
        </li>
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          Network
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2016-09-26
        </span>
        
        
      </div>
    </header>

    
    
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">Contents</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP"><span class="toc-text">HTTP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#概念"><span class="toc-text">概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP请求与响应"><span class="toc-text">HTTP请求与响应</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#响应状态码"><span class="toc-text">响应状态码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#交互方式"><span class="toc-text">交互方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TCP"><span class="toc-text">TCP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#三次握手"><span class="toc-text">三次握手</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#四次分手"><span class="toc-text">四次分手</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#网络结构"><span class="toc-text">网络结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#OSI结构"><span class="toc-text">OSI结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP-IP结构"><span class="toc-text">TCP/IP结构</span></a></li></ol></li></ol>
    </div>
  </div>


    <div class="post-content">
      
        <!-- # Network -->
<blockquote>
<p><a href="https://hit-alibaba.github.io/interview/basic/network/HTTP.html" target="_blank" rel="external">HTTP面试基础</a></p>
<p><a href="http://www.jellythink.com/archives/705" target="_blank" rel="external">TCP连接的三次握手与四次分手</a></p>
<p><a href="http://www.jianshu.com/p/4b9d43c0571a" target="_blank" rel="external">计算机网络结构</a></p>
</blockquote>
<h2 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h2><ul>
<li>HTTP构建于TCP/IP协议之上，默认端口号是80</li>
<li>HTTP是无连接无状态的</li>
</ul>
<h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><p>HTTP 协议是以 ASCII 码传输，建立在 TCP/IP 协议之上的应用层规范。</p>
<h2 id="HTTP请求与响应"><a href="#HTTP请求与响应" class="headerlink" title="HTTP请求与响应"></a>HTTP请求与响应</h2><p>HTTP 请求由三部分组成：</p>
<ul>
<li>请求行</li>
<li>请求头</li>
<li>请求正文</li>
</ul>
<a id="more"></a>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">// 请求行</div><div class="line">POST /index.php HTTP/1.1</div><div class="line"></div><div class="line">// 请求头</div><div class="line">Host: localhost</div><div class="line">User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:10.0.2) Gecko/20100101 Firefox/10.0.2</div><div class="line">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8</div><div class="line">Accept-Language: zh-cn,zh;q=0.5</div><div class="line">Accept-Encoding: gzip, deflate</div><div class="line">Connection: keep-alive</div><div class="line">Referer: http://localhost/</div><div class="line">Content-Length：25</div><div class="line">Content-Type：application/x-www-form-urlencoded</div><div class="line"></div><div class="line">// 请求正文</div><div class="line">username=aa&amp;password=1234</div></pre></td></tr></table></figure>
<p>HTTP响应也由3个部分构成，分别是：</p>
<ul>
<li>状态行</li>
<li>响应头(Response Header)</li>
<li>响应正文</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">// 响应行</div><div class="line">HTTP/1.1 200 OK</div><div class="line"></div><div class="line">// 响应头</div><div class="line">Server:Apache Tomcat/5.0.12</div><div class="line">Date:Mon,6Oct2003 13:23:42 GMT</div><div class="line">Content-Length:112</div><div class="line"></div><div class="line">// 响应正文</div><div class="line">&lt;html&gt;...</div></pre></td></tr></table></figure>
<h3 id="响应状态码"><a href="#响应状态码" class="headerlink" title="响应状态码"></a>响应状态码</h3><p>响应码可根据第一位数字分五类表示：</p>
<ul>
<li>1xx：信息，请求收到，继续处理</li>
<li>2xx：成功，行为被成功地接受、理解和采纳</li>
<li>3xx：重定向，为了完成请求，必须进一步执行的动作</li>
<li>4xx：客户端错误，请求包含语法错误或者请求无法实现</li>
<li>5xx：服务器错误，服务器不能实现一种明显无效的请求</li>
</ul>
<p>几个常用状态码示意：</p>
<table>
<thead>
<tr>
<th style="text-align:left">Code</th>
<th style="text-align:center">Descriptions</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">200</td>
<td style="text-align:center">OK 客户端请求成功</td>
</tr>
<tr>
<td style="text-align:left">301</td>
<td style="text-align:center">Moved Permanently 请求永久重定向</td>
</tr>
<tr>
<td style="text-align:left">302</td>
<td style="text-align:center">Moved Temporarily 请求临时重定向</td>
</tr>
<tr>
<td style="text-align:left">304</td>
<td style="text-align:center">Not Modified 文件未修改，可以直接使用缓存的文件。</td>
</tr>
<tr>
<td style="text-align:left">400</td>
<td style="text-align:center">Bad Request 由于客户端请求有语法错误，不能被服务器所理解。</td>
</tr>
<tr>
<td style="text-align:left">401</td>
<td style="text-align:center">Unauthorized 请求未经授权。这个状态代码必须和WWW-Authenticate报头域一起使用</td>
</tr>
<tr>
<td style="text-align:left">403</td>
<td style="text-align:center">Forbidden 服务器收到请求，但是拒绝提供服务。服务器通常会在响应正文中给出不提供服务的原因</td>
</tr>
<tr>
<td style="text-align:left">404</td>
<td style="text-align:center">Not Found 请求的资源不存在，例如，输入了错误的URL</td>
</tr>
<tr>
<td style="text-align:left">500</td>
<td style="text-align:center">Internal Server Error 服务器发生不可预期的错误，导致无法完成客户端的请求。</td>
</tr>
<tr>
<td style="text-align:left">503</td>
<td style="text-align:center">Service Unavailable 服务器当前不能够处理客户端的请求，在一段时间之后，服务器可能会恢复正常。</td>
</tr>
</tbody>
</table>
<h2 id="交互方式"><a href="#交互方式" class="headerlink" title="交互方式"></a>交互方式</h2><p>HTTP定义了<code>GET</code>，<code>POST</code>，<code>PUT</code>，<code>DELETE</code>四种最基本的与服务器交互方式，<code>URL</code>全称为统一资源定位符，用于描述网络上的一个资源，可以认为而 HTTP 中的<code>GET</code>，<code>POST</code>，<code>PUT</code>，<code>DELETE</code>就对应着对这个资源的查，改，增，删4个操作。</p>
<p><code>GET</code>与<code>POST</code>请求的区别:</p>
<ul>
<li><code>GET</code>请求将请求数据放在URL里，和<code>POST</code>则将请求数据放在请求主体中；</li>
<li>虽然HTTP没有对请求数据大小做限制，但<code>GET</code>请求实际会受到浏览器URL输入长度限制，而<code>POST</code>请求理论上不受限制；</li>
<li><code>POST</code>请求相对于<code>GET</code>请求相对安全</li>
</ul>
<p>其他交互方式：</p>
<table>
<thead>
<tr>
<th style="text-align:left">Method</th>
<th style="text-align:center">Descriptions</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">HEAD</td>
<td style="text-align:center">与 GET 相同，但只返回 HTTP 报头，不返回文档主体。</td>
</tr>
<tr>
<td style="text-align:left">OPTIONS</td>
<td style="text-align:center">返回服务器支持的 HTTP 方法。</td>
</tr>
<tr>
<td style="text-align:left">CONNECT</td>
<td style="text-align:center">把请求连接转换到透明的 TCP/IP 通道。</td>
</tr>
</tbody>
</table>
<h2 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h2><ul>
<li>TCP提供一种面向连接的、可靠的字节流服务<br>在一个TCP连接中，仅有两方进行彼此通信。广播和多播不能用于TCP</li>
<li>TCP使用校验和，确认和重传机制来保证可靠传输</li>
<li>TCP使用累积确认</li>
<li>TCP使用滑动窗口机制来实现流量控制，通过动态改变窗口的大小进行拥塞控制</li>
</ul>
<h3 id="三次握手"><a href="#三次握手" class="headerlink" title="三次握手"></a>三次握手</h3><ul>
<li>第一次握手：建立连接。客户端发送连接请求报文段，将<code>SYN</code>位置为1，<code>Sequence Number</code>为x；然后，客户端进入<code>SYN_SEND</code>状态，等待服务器的确认；</li>
<li>第二次握手：服务器收到<code>SYN</code>报文段。服务器收到客户端的<code>SYN</code>报文段，需要对这个<code>SYN</code>报文段进行确认，设置<code>Acknowledgment Number</code>为x+1(<code>Sequence Number</code>+1)；同时，自己自己还要发送<code>SYN</code>请求信息，将<code>SYN</code>位置为1，<code>Sequence Number</code>为y；服务器端将上述所有信息放到一个报文段（即<code>SYN</code>+<code>ACK</code>报文段）中，一并发送给客户端，此时服务器进入<code>SYN_RECV</code>状态；</li>
<li>第三次握手：客户端收到服务器的<code>SYN</code>+<code>ACK</code>报文段。然后将<code>Acknowledgment Number</code>设置为y+1，向服务器发送<code>ACK</code>报文段，这个报文段发送完毕以后，客户端和服务器端都进入ESTABLISHED状态，完成TCP三次握手。</li>
</ul>
<p><img src="../IMG/tcp_connect.png" alt="tcp_connect"></p>
<h3 id="四次分手"><a href="#四次分手" class="headerlink" title="四次分手"></a>四次分手</h3><ul>
<li>第一次分手：主机1（可以使客户端，也可以是服务器端），设置<code>Sequence Number</code>和<code>Acknowledgment Number</code>，向主机2发送一个FIN报文段；此时，主机1进入FIN_WAIT_1状态；这表示主机1没有数据要发送给主机2了；</li>
<li>第二次分手：主机2收到了主机1发送的FIN报文段，向主机1回一个<code>ACK</code>报文段，<code>Acknowledgment Number</code>为<code>Sequence Number</code>加1；主机1进入FIN_WAIT_2状态；主机2告诉主机1，我“同意”你的关闭请求；</li>
<li>第三次分手：主机2向主机1发送FIN报文段，请求关闭连接，同时主机2进入<code>LAST_ACK</code>状态；</li>
<li>第四次分手：主机1收到主机2发送的FIN报文段，向主机2发送<code>ACK</code>报文段，然后主机1进入<code>TIME_WAIT</code>状态；主机2收到主机1的<code>ACK</code>报文段以后，就关闭连接；此时，主机1等待2MSL后依然没有收到回复，则证明Server端已正常关闭，那好，主机1也可以关闭连接了。</li>
</ul>
<h2 id="网络结构"><a href="#网络结构" class="headerlink" title="网络结构"></a>网络结构</h2><h3 id="OSI结构"><a href="#OSI结构" class="headerlink" title="OSI结构"></a>OSI结构</h3><p><img src="../IMG/osi_struct.png" alt="osi_struct"></p>
<h3 id="TCP-IP结构"><a href="#TCP-IP结构" class="headerlink" title="TCP/IP结构"></a>TCP/IP结构</h3><p><img src="../IMG/tcp_struct.png" alt="tcp_struct"></p>

      
    </div>

    
      
      



      
      
    

    
      <footer class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/CS/">CS</a>
            
          </div>
        
        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2016/10/22/Front/JavaScript/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">JavaScript</span>
        <span class="prev-text nav-mobile">Prev</span>
      </a>
    
    
      <a class="next" href="/2016/09/24/CS/Design-Pattern/">
        <span class="next-text nav-default">Design Pattern</span>
        <span class="prev-text nav-mobile">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

      </footer>
    

  </article>


          </div>
          
  <div class="comments" id="comments">
    
  </div>


        </div>
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
        
          <a href="mailto:nic.reals@outlook.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
        
          <a href="https://github.com/nicreals" class="iconfont icon-github" title="github"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    
    
      <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
    
  </div>


<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://hexo.io/">Hexo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">
    
    &copy; 
     
      2015 - 
    
    2017

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Nic Reals</span>
  </span>
</div>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    
  



    




  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  


    <script type="text/javascript" src="/js/src/even.js?v=2.6.0"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=2.6.0"></script>

  </body>
</html>
